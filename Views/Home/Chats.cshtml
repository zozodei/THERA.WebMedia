@{
    Layout = "_Layout";
    var chats = ViewBag.chats as List<Chat>;
    var terapeutas = ViewBag.terapeutas as List<Terapeuta>;
}

<div class="container mt-4">
    <h2 class="mb-4">Tus chats</h2>

    @if (chats == null || chats.Count == 0)
    {
        <div class="alert alert-info">
            No tenÃ©s chats abiertos por ahora.
        </div>
    }
    else
    {
        <div class="list-group">

            @foreach (Chat chat in chats)
            {
                Terapeuta terapeuta = terapeutas.FirstOrDefault(t => t.id == chat.idTerapeuta);

                <a href="@Url.Action("irChatTerapeuta", "Home", new { idTerapeuta = terapeuta.id })" 
                   class="list-group-item list-group-item-action d-flex align-items-center">

                    <img src="/Imagenes/FotosTerapeuta/@ViewBag.terapeuta.foto" style="width:55px;height:55px;object-fit:cover;border-radius:50%;margin-right:15px;" />

                    <div>
                        <strong>@(terapeuta != null ? terapeuta.nombre + " " + terapeuta.apellido : "Terapeuta")</strong><br />
                        <span class="text-muted">Chat ID: @chat.id</span>
                    </div>

                </a>
            }
        </div>
    }
</div>
